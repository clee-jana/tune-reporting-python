\hypertarget{example_client_8py-example}{\section{example\-\_\-client.\-py}
}
Tune Mobile\-App\-Tracking Management A\-P\-I access class A client for accessing the Tune Management A\-P\-I service

\-:param str controller\-: Controller portion of Tune Management A\-P\-I service request. \-:param str action\-: Action portion of Tune Management A\-P\-I service request. \-:param str api\-\_\-key\-: Users management A\-P\-I Key \-:param dict query\-\_\-string\-\_\-dict\-: Query string parameters.

Attributes\-: \-\_\-\-\_\-request\-: Tune Management A\-P\-I request object\par
 \-\_\-\-\_\-response\-: Tune Management A\-P\-I response object\par
 
\begin{DoxyCodeInclude}
1 \textcolor{comment}{#!/usr/bin/env python}
2 \textcolor{comment}{# -*- coding: utf-8 -*-}
3 \textcolor{comment}{#}
4 \textcolor{comment}{## example\_client.py}
5 \textcolor{comment}{#}
6 \textcolor{comment}{#  Copyright (c) 2014 Tune, Inc}
7 \textcolor{comment}{#  All rights reserved.}
8 \textcolor{comment}{#}
9 \textcolor{comment}{#  Permission is hereby granted, free of charge, to any person obtaining}
10 \textcolor{comment}{#  a copy of this software and associated documentation files}
11 \textcolor{comment}{#  (the "Software"), to deal in the Software without restriction, including}
12 \textcolor{comment}{#  without limitation the rights to use, copy, modify, merge, publish,}
13 \textcolor{comment}{#  distribute, sublicense, and/or sell copies of the Software, and to permit}
14 \textcolor{comment}{#  persons to whom the Software is furnished to do so, subject to the}
15 \textcolor{comment}{#  following conditions:}
16 \textcolor{comment}{#}
17 \textcolor{comment}{#  The above copyright notice and this permission notice shall be included in}
18 \textcolor{comment}{#  all copies or substantial portions of the Software.}
19 \textcolor{comment}{#}
20 \textcolor{comment}{#  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR}
21 \textcolor{comment}{#  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,}
22 \textcolor{comment}{#  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL}
23 \textcolor{comment}{#  THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER}
24 \textcolor{comment}{#  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING}
25 \textcolor{comment}{#  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER}
26 \textcolor{comment}{#  DEALINGS IN THE SOFTWARE.}
27 \textcolor{comment}{#}
28 \textcolor{comment}{#  Python 3.0}
29 \textcolor{comment}{#}
30 \textcolor{comment}{#  @category  Tune}
31 \textcolor{comment}{#  @package   Tune\_PHP\_SDK}
32 \textcolor{comment}{#  @author    Jeff Tanner <jefft@tune.com>}
33 \textcolor{comment}{#  @copyright 2014 Tune (http://www.tune.com)}
34 \textcolor{comment}{#  @license   http://opensource.org/licenses/MIT The MIT License (MIT)}
35 \textcolor{comment}{#  @version   0.9.1}
36 \textcolor{comment}{#  @link      https://developers.mobileapptracking.com Tune Developer Community @endlink}
37 \textcolor{comment}{#}
38 
39 \textcolor{keyword}{import} sys
40 \textcolor{keyword}{import} traceback
41 
42 \textcolor{keyword}{from} \hyperlink{namespacetune_1_1common}{tune.common} \textcolor{keyword}{import} (TuneSdkException, TuneServiceException)
43 \textcolor{keyword}{from} \hyperlink{namespacetune_1_1management_1_1service}{tune.management.service} \textcolor{keyword}{import} (TuneManagementClient)
44 
45 \textcolor{comment}{##}
46 \textcolor{comment}{# Example using Tune Management API client.}
47 \textcolor{keyword}{class }ExampleClient(\hyperlink{classobject}{object}):
48 
49     \textcolor{keyword}{def }\_\_init\_\_(self):
50         \textcolor{keywordflow}{pass}
51 
52     \textcolor{comment}{#}
53     \textcolor{comment}{# Example of running successful requests to Tune MobileAppTracking Management API.}
54     \textcolor{comment}{#}
55     \textcolor{comment}{##}
56     \textcolor{comment}{# Run Example\(\backslash\)n}
57     \textcolor{keyword}{def }run(self, api\_key):
58 
59         print(  \textcolor{stringliteral}{"======================================"})
60         print(  \textcolor{stringliteral}{"= Tune Management API Client Example ="})
61         print(  \textcolor{stringliteral}{"======================================"})
62         print(  \textcolor{stringliteral}{"    Tune SDK version: \{0\}"}.format(
63                                 TuneManagementClient.version()
64                                 ))
65         print(\textcolor{stringliteral}{""})
66 
67         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} api\_key \textcolor{keywordflow}{or} len(api\_key) < 1:
68             \textcolor{keywordflow}{raise} ValueError(\textcolor{stringliteral}{"Parameter 'api\_key' is not defined."})
69 
70         \textcolor{keywordflow}{try}:
71             controller = \textcolor{stringliteral}{"account/users"}
72             action = \textcolor{stringliteral}{"find.json"}
73 
74             query\_string\_dict = \{
75                 \textcolor{stringliteral}{'limit'}: 5,
76                 \textcolor{stringliteral}{'fields'}: \textcolor{stringliteral}{'first\_name,last\_name,email,title'}
77             \}
78 
79             client = TuneManagementClient(
80                 controller,
81                 action,
82                 api\_key,
83                 query\_string\_dict
84                 )
85 
86             \textcolor{keywordflow}{if} client.call():
87                 print(client.response)
88             \textcolor{keywordflow}{else}:
89                 \textcolor{keywordflow}{raise} RuntimeError(\textcolor{stringliteral}{"Unexpected failure: \{\}."}.format(client.response))
90 
91         \textcolor{keywordflow}{except} TuneSdkException \textcolor{keyword}{as} exc:
92             print(\textcolor{stringliteral}{"TuneSdkException (\{\})"}.format(exc))
93             print(self.format\_exception(exc.errors))
94         \textcolor{keywordflow}{except} Exception:
95             exc\_type, exc\_value, exc\_traceback = sys.exc\_info()
96             print(\textcolor{stringliteral}{"*** print\_tb:"})
97             traceback.print\_tb(exc\_traceback, limit=1, file=sys.stdout)
98             print(\textcolor{stringliteral}{"*** print\_exception:"})
99             traceback.print\_exception(exc\_type, exc\_value, exc\_traceback,
100                                       limit=2, file=sys.stdout)
101             print(\textcolor{stringliteral}{"*** print\_exc:"})
102             traceback.print\_exc()
103 
104         print(  \textcolor{stringliteral}{"======================================"})
105         print(  \textcolor{stringliteral}{"= End Example                        ="})
106         print(  \textcolor{stringliteral}{"======================================"})
107 
108     @staticmethod
109     \textcolor{keyword}{def }format\_exception(e):
110         \textcolor{stringliteral}{"Provide traceback of provided exception."}
111         exception\_list = traceback.format\_stack()
112         exception\_list = exception\_list[:-2]
113         exception\_list.extend(traceback.format\_tb(sys.exc\_info()[2]))
114         exception\_list.extend(traceback.format\_exception\_only(sys.exc\_info()[0], sys.exc\_info()[1]))
115 
116         exception\_str = \textcolor{stringliteral}{"Traceback (most recent call last):\(\backslash\)n"}
117         exception\_str += \textcolor{stringliteral}{""}.join(exception\_list)
118         \textcolor{comment}{# Removing the last \(\backslash\)n}
119         exception\_str = exception\_str[:-1]
120 
121         \textcolor{keywordflow}{return} exception\_str
122 
123 \textcolor{keywordflow}{if} \_\_name\_\_ == \textcolor{stringliteral}{'\_\_main\_\_'}:
124     \textcolor{keywordflow}{try}:
125         \textcolor{keywordflow}{if} len(sys.argv) < 2:
126             \textcolor{keywordflow}{raise} ValueError(\textcolor{stringliteral}{"Provide API Key to examples\_execute Tune Management API example \{\}."}.format(
      sys.argv[0]))
127         api\_key = sys.argv[1]
128         example = ExampleClient()
129         example.run(api\_key)
130     \textcolor{keywordflow}{except} Exception \textcolor{keyword}{as} exc:
131         print(\textcolor{stringliteral}{"Exception: \{0\}"}.format(exc))
132         \textcolor{keywordflow}{raise}
\end{DoxyCodeInclude}
 